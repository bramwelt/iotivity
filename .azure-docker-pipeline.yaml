---
trigger:
  branches:
    include:
      - master
  paths:
    include:
      - Dockerfile

pr:
  autoCancel: true
  branches:
    include:
      - master
  paths:
    include:
      - Dockefile


schedules:
  - cron: "0 12 * * 0"
    displayName: Weekly Sunday build
    branches:
      include:
        - '*'

jobs:
  - job: buildContainer
    steps:
      - task: Docker@2
        displayName: Login to Docker Hub
        inputs:
          command: login
          containerRegistry: dockerHubConnection1
      - task: Docker@2
        displayName: Build and Push
        inputs:
          command: buildAndPush
          repository: bramwelt2/iotivity
          tags: |
            latest
